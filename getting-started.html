<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Get started with TR ONESOURCE E-Invoicing API integration - Partner onboarding, prerequisites, and authentication setup">
    <title>Getting Started | TR ONESOURCE E-Invoicing</title>

    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/chatbot.css">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation Header -->
    <header class="site-header">
        <nav class="navbar">
            <div class="container">
                <div class="navbar-brand">
                    <h1 class="logo">THOMSON REUTERS</h1>
                    <span class="logo-subtitle">ONESOURCE API Guide</span>
                </div>

                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation menu">
                    <i class="fas fa-bars"></i>
                </button>

                <ul class="nav-menu" id="navMenu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="getting-started.html" class="active">Getting Started</a></li>
                    <li><a href="einvoicing-integration.html">E-Invoicing Integration</a></li>
                    <li><a href="faq.html">FAQ</a></li>
                    <li><a href="https://developers.thomsonreuters.com" target="_blank" class="external-link">
                        Developer Portal <i class="fas fa-external-link-alt"></i>
                    </a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <section class="page-header">
            <div class="container">
                <h1>Getting Started</h1>
                <p class="page-subtitle">Partner onboarding, prerequisites, and authentication setup</p>
            </div>
        </section>

        <div class="container content-container">
            <aside class="sidebar-toc">
                <h3>On This Page</h3>
                <ul>
                    <li><a href="#onboarding">Partner Onboarding</a></li>
                    <li><a href="#prerequisites">Prerequisites</a></li>
                    <li><a href="#authentication">Authentication & Authorization</a></li>
                    <li><a href="#environments">Environment URLs</a></li>
                    <li><a href="#next-steps">Next Steps</a></li>
                </ul>
            </aside>

            <article class="main-content">
                <section id="onboarding">
                    <h2>Partner Onboarding Process</h2>
                    <p class="intro">
                        This guide walks you through the process of becoming an ONESOURCE E-Invoicing integration partner.
                        Follow these steps to get started.
                    </p>

                    <h3>Step 1: Contact ONESOURCE Team</h3>
                    <ul>
                        <li>Reach out to the Thomson Reuters ONESOURCE team</li>
                        <li>Express interest in becoming an integration partner</li>
                        <li>Discuss your client base, use cases, and geographic scope</li>
                    </ul>

                    <h3>Step 2: Receive Partner Credentials</h3>
                    <p>ONESOURCE will generate universal partner credentials:</p>
                    <ul>
                        <li><strong>client_id</strong> (consumer key)</li>
                        <li><strong>client_secret</strong> (consumer secret)</li>
                    </ul>
                    <div class="alert alert-warning">
                        <strong>Important:</strong> These credentials are partner-specific, not client-specific.
                        Keep them confidential and secure.
                    </div>

                    <h3>Step 3: Register Redirect URIs</h3>
                    <p>Provide your OAuth 2.0 redirect URIs to ONESOURCE. These must be registered before authentication will work.</p>
                    <p><strong>Examples:</strong></p>
                    <ul>
                        <li><code>https://yourplatform.com/onesource/callback</code></li>
                        <li><code>https://yourplatform.com/auth/onesource/return</code></li>
                    </ul>

                    <h3>Step 4: Receive Test Accounts</h3>
                    <p>ONESOURCE will provision test accounts simulating:</p>
                    <ul>
                        <li><strong>Supplier account</strong> - For testing AR/outbound flow</li>
                        <li><strong>Buyer account</strong> - For testing AP/inbound flow</li>
                    </ul>
                    <p>Each test account has a <code>companyId</code> and test users.</p>

                    <h3>Step 5: Access Developer Portal</h3>
                    <p>
                        Public documentation available at:
                        <a href="https://developers.thomsonreuters.com" target="_blank">developers.thomsonreuters.com</a>
                    </p>
                    <p>Includes API reference, Swagger documentation, and examples.</p>
                </section>

                <section id="prerequisites">
                    <h2>Prerequisites Checklist</h2>
                    <p class="intro">Before beginning integration, ensure you have the following:</p>

                    <div class="alert alert-info">
                        <h4 style="margin-top: 0;">âœ“ Required Items</h4>
                        <ul style="margin-bottom: 0;">
                            <li>Partner credentials received (<code>client_id</code> + <code>client_secret</code>)</li>
                            <li>Redirect URIs registered with ONESOURCE</li>
                            <li>Test accounts received with <code>companyId</code> values</li>
                            <li>Test user credentials received</li>
                            <li>Access to developer portal documentation</li>
                        </ul>
                    </div>

                    <h3>Technical Requirements</h3>
                    <ul>
                        <li><strong>HTTP/HTTPS Support</strong> - Ability to make secure API calls</li>
                        <li><strong>OAuth 2.0</strong> - Support for authorization code and client credentials flows</li>
                        <li><strong>XML Processing</strong> - Ability to generate and parse PUF XML documents</li>
                        <li><strong>Polling/Webhooks</strong> - Mechanism for checking document status updates</li>
                        <li><strong>Data Storage</strong> - Database to store mappings between your system and ONESOURCE</li>
                    </ul>

                    <h3>Understanding Your Scope</h3>
                    <p>Before starting, clarify:</p>
                    <ul>
                        <li><strong>Geographic Scope</strong> - Which countries will your clients operate in?</li>
                        <li><strong>Document Types</strong> - Invoice, Credit Note, Application Response, etc.?</li>
                        <li><strong>Integration Type</strong> - AR (outbound), AP (inbound), or both?</li>
                        <li><strong>Volume Expectations</strong> - Estimated documents per day/month</li>
                    </ul>
                </section>

                <section id="authentication">
                    <h2>Authentication & Authorization</h2>
                    <p class="intro">
                        ONESOURCE uses OAuth 2.0 with two different grant types for secure API access.
                    </p>

                    <h3>Authentication Model Overview</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Grant Type</th>
                                <th>Purpose</th>
                                <th>When to Use</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Client Credentials</strong></td>
                                <td>Partner-level API access</td>
                                <td>Getting access tokens for API calls</td>
                            </tr>
                            <tr>
                                <td><strong>Authorization Code</strong></td>
                                <td>End-user authorization</td>
                                <td>Granting access to client data</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Client Credentials Flow</h3>
                    <p>Used to obtain an <code>access_token</code> for making API calls:</p>

                    <pre><code class="language-http">POST https://api-uat.onesourcetax.com/oauth2/v1/token
Content-Type: application/x-www-form-urlencoded

client_id={your_consumer_key}
client_secret={your_consumer_secret}
grant_type=client_credentials
scope=urn:tr:onesource:auth:api:einvoicing</code></pre>

                    <p><strong>Response:</strong></p>
                    <pre><code class="language-json">{
  "success": "approved",
  "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": "1799",
  "issued_at": "1744125241833"
}</code></pre>

                    <div class="alert alert-warning">
                        <strong>Token Management:</strong>
                        <ul style="margin-bottom: 0;">
                            <li>Token expires in 1799 seconds (~30 minutes)</li>
                            <li>Implement token caching and refresh logic</li>
                            <li>Do NOT request a new token for every API call</li>
                            <li>Store token with expiry timestamp and refresh when needed</li>
                        </ul>
                    </div>

                    <h3>Authorization Code Flow</h3>
                    <p>Used when an end-user needs to authorize your platform to access their ONESOURCE account.</p>

                    <p><strong>When to use:</strong></p>
                    <ul>
                        <li>First-time setup for a new client</li>
                        <li>When user credentials expire or are revoked</li>
                        <li>When user needs to grant access to additional companies</li>
                    </ul>

                    <h4>Step 1: Redirect User to Authorization URL</h4>
                    <pre><code class="language-http">https://api-uat.onesourcetax.com/oauth2/v1/authorize?
response_type=code&
client_id={your_client_id}&
redirect_uri={your_registered_redirect_uri}&
scope=urn:tr:onesource:auth:api:einvoicing&
state={random_state_string}</code></pre>

                    <h4>Step 2: Handle Callback</h4>
                    <p>User will be redirected back to your URI with:</p>
                    <pre><code>https://yourplatform.com/callback?code=AUTHORIZATION_CODE&state=YOUR_STATE</code></pre>
                    <p>Verify the <code>state</code> parameter matches what you sent.</p>

                    <h4>Step 3: Exchange Code for Token</h4>
                    <pre><code class="language-http">POST https://api-uat.onesourcetax.com/oauth2/v1/token
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code
code={authorization_code_from_callback}
redirect_uri={same_redirect_uri_as_before}
client_id={your_client_id}
client_secret={your_client_secret}</code></pre>

                    <p><strong>Response includes:</strong></p>
                    <ul>
                        <li><code>access_token</code> - Use for API calls</li>
                        <li><code>refresh_token</code> - Use to get new access token without user interaction</li>
                    </ul>

                    <div class="alert alert-info">
                        <strong>Best Practice:</strong> Store tokens encrypted in your database, associated with the user/tenant ID.
                        Never log tokens or expose them in URLs.
                    </div>
                </section>

                <section id="environments">
                    <h2>Environment URLs</h2>
                    <p class="intro">ONESOURCE provides separate environments for testing and production.</p>

                    <table>
                        <thead>
                            <tr>
                                <th>Environment</th>
                                <th>Base URL</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>UAT (Testing)</strong></td>
                                <td><code>https://api-uat.onesourcetax.com</code></td>
                                <td>Development and testing</td>
                            </tr>
                            <tr>
                                <td><strong>PROD (EMEA)</strong></td>
                                <td><code>https://api-emea.onesourcetax.com</code></td>
                                <td>Production for EMEA region</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="alert alert-warning">
                        <strong>Note:</strong> There is no separate sandbox environment. Testing is done in UAT using test accounts
                        and send modes (Certification/Test/Production).
                    </div>

                    <h3>Testing Modes</h3>
                    <p>When submitting documents, you can specify a testing mode:</p>
                    <ul>
                        <li><strong>Certification Mode</strong> - Documents never leave Pagero platform, tests validation only</li>
                        <li><strong>Test Mode</strong> - Documents tagged as "Test" and sent through full flow</li>
                        <li><strong>Production Mode</strong> - Real production documents</li>
                    </ul>
                </section>

                <section id="next-steps">
                    <h2>Next Steps</h2>
                    <p class="intro">Now that you understand the basics, continue to the integration guide:</p>

                    <div class="resources-grid">
                        <a href="einvoicing-integration.html" class="resource-card">
                            <i class="fas fa-rocket"></i>
                            <h3>E-Invoicing Integration</h3>
                            <p>Learn how to implement AR and AP flows with ONESOURCE</p>
                        </a>

                        <a href="faq.html" class="resource-card">
                            <i class="fas fa-question-circle"></i>
                            <h3>FAQ & Troubleshooting</h3>
                            <p>Common questions and solutions to integration challenges</p>
                        </a>

                        <a href="https://developers.thomsonreuters.com" target="_blank" class="resource-card">
                            <i class="fas fa-book"></i>
                            <h3>API Reference</h3>
                            <p>Detailed API endpoint documentation</p>
                        </a>
                    </div>

                    <div class="alert alert-success" style="margin-top: var(--spacing-lg);">
                        <h4 style="margin-top: 0;">Ready to Integrate?</h4>
                        <p style="margin-bottom: 0;">
                            Proceed to the <a href="einvoicing-integration.html">E-Invoicing Integration Guide</a>
                            to start building your integration with step-by-step instructions for AR and AP flows.
                        </p>
                    </div>
                </section>
            </article>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>THOMSON REUTERS</h4>
                    <p>ONESOURCE API Integration Guide</p>
                </div>

                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="https://developers.thomsonreuters.com" target="_blank">Developer Portal</a></li>
                        <li><a href="getting-started.html">Getting Started</a></li>
                        <li><a href="einvoicing-integration.html">Integration Guide</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="faq.html">Documentation</a></li>
                        <li><a href="https://www.thomsonreuters.com" target="_blank">Contact Support</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 Thomson Reuters. All rights reserved. | <span class="version">API Guide v1.0</span></p>
                <p class="last-updated">Last Updated: January 2025</p>
            </div>
        </div>
    </footer>

    <!-- Chat Widget Button -->
    <div id="chatWidget"></div>

    <!-- Scripts -->
    <script src="assets/js/navigation.js"></script>
    <script src="assets/js/chatbot-ui.js"></script>
    <script src="assets/js/openarena-client.js"></script>
    <script src="assets/js/chatbot-controller.js"></script>
</body>
</html>
